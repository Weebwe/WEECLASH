<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>TON Random Wallet Checker</title>
  <!-- TON SDK -->
  <script src="https://cdn.jsdelivr.net/npm/tonweb@0.0.55/dist/tonweb.min.js"></script>
  <!-- BIP39 -->
  <script src="https://cdn.jsdelivr.net/npm/bip39@3.0.4/dist/index.browser.js"></script>
  <style>
    body { font-family: monospace; background: #f9f9f9; padding: 20px; }
    button { font-size: 18px; padding: 10px 20px; }
    #output, #found { background: #fff; padding: 10px; margin-top: 20px; white-space: pre-wrap; border: 1px solid #ddd; }
  </style>
</head>
<body>
  <h1>TON Random Wallet Checker</h1>
  <button onclick="generateAndCheck()">–ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —ñ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>

  <pre id="output"></pre>

  <h2>üîí –ó–Ω–∞–π–¥–µ–Ω—ñ —Ñ—Ä–∞–∑–∏ –∑ –±–∞–ª–∞–Ω—Å–æ–º:</h2>
  <pre id="found">(–ø–æ–∫–∏ –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ)</pre>

  <script>
    async function generateAndCheck() {
      const output = document.getElementById('output');
      const found = document.getElementById('found');

      const bip39 = window.bip39;
      const TonWeb = window.TonWeb;

      // 1. –ì–µ–Ω–µ—Ä—É—î–º–æ —Å–∏–¥-—Ñ—Ä–∞–∑—É
      const mnemonic = bip39.generateMnemonic(256); // 24 —Å–ª–æ–≤–∞
      const seed = await bip39.mnemonicToSeed(mnemonic);

      // 2. –ö–ª—é—á—ñ
      const nacl = TonWeb.utils.nacl;
      const keyPair = nacl.sign.keyPair.fromSeed(seed.slice(0, 32));
      const publicKey = keyPair.publicKey;

      // 3. –°—Ç–≤–æ—Ä—é—î–º–æ –∞–¥—Ä–µ—Å—É
      const wallet = new TonWeb.Wallets.all.v3R2(new TonWeb(), {
        publicKey: publicKey
      });
      const address = await wallet.getAddress();
      const tonAddress = address.toString(true, true, true);

      // 4. –ü–æ–∫–∞–∑—É—î–º–æ —â–æ —Ä–æ–±–∏–º–æ
      output.textContent = `üìå –°–∏–¥-—Ñ—Ä–∞–∑–∞:\n${mnemonic}\n\nüìå TON –ê–¥—Ä–µ—Å–∞:\n${tonAddress}\n\n–ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –±–∞–ª–∞–Ω—Å...`;

      try {
        const response = await fetch(`https://tonapi.io/v2/accounts/${tonAddress}`);
        const data = await response.json();

        const balanceNanoTON = data.balance ? parseInt(data.balance) : 0;
        const balanceTON = balanceNanoTON / 1e9;

        output.textContent += `\n\nüí∞ –ë–∞–ª–∞–Ω—Å: ${balanceTON} TON (${balanceNanoTON} nanoTON)`;

        if (balanceTON > 0) {
          output.textContent += `\n\nüéâ –ó–ù–ê–ô–î–ï–ù–û –ê–ö–¢–ò–í–ù–£ –ê–î–†–ï–°–£!`;
          // –î–æ–¥–∞—î–º–æ —É —Å–ø–∏—Å–æ–∫ –Ω–∏–∂—á–µ
          if (found.textContent === '(–ø–æ–∫–∏ –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ)') {
            found.textContent = '';
          }
          found.textContent += `\nüìå ${mnemonic}\n–ê–¥—Ä–µ—Å–∞: ${tonAddress}\n–ë–∞–ª–∞–Ω—Å: ${balanceTON} TON\n------------------------------\n`;
        } else {
          output.textContent += `\n\n‚ùå –ë–∞–ª–∞–Ω—Å –¥–æ—Ä—ñ–≤–Ω—é—î 0`;
        }

      } catch (err) {
        output.textContent += `\n\n‚ö†Ô∏è –ü–æ–º–∏–ª–∫–∞: ${err.message}`;
      } 
    }
  </script>
</body>
</html>