<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>WEE CLASH</title>
  <link rel="icon" href="ico.png" type="image/png" />
  <link rel="apple-touch-icon" href="ico.png" />
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#000000" />
  <link rel="stylesheet" href="css/style.css" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

  <div id="gameContainer">
    <div class="top-panel">
      <div class="user-profile-info"> 
        <img src="media/avatar.png" alt="–ê–≤–∞—Ç–∞—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞" class="avatar" />
        <span>–ì—Ä–∞–≤–µ—Ü—å</span> 
      </div>

      <div class="resource-and-power-container"> 
        <div class="resource-container">
          <div class="resource-item"><span class="emoji-icon">üå≥</span> <span>1250</span></div>
          <div class="resource-item"><span class="emoji-icon">ü™®</span> <span>875</span></div>
          <div class="resource-item"><span class="emoji-icon">üçé</span> <span>2100</span></div>
          <div class="resource-item"><span class="emoji-icon">üí∞</span> <span>500</span></div>
          <div class="resource-item"><span class="emoji-icon">‚ú®</span> <span>250</span></div>
        </div>
        <div class="total-power">üí™ 12345</div> 
      </div>
      
      <button id="settingsButton" aria-label="–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≥—Ä–∏">
        <span class="emoji-icon">‚öôÔ∏è</span>
      </button>
    </div>

    <div id="heroScreen" class="game-screen active"> 
      <h2 class="screen-title">–í–∞—à –ì–µ—Ä–æ–π</h2>
      <p>–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ WEE CLASH!</p>
      <p>–í–∞—à—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, —ñ–Ω–≤–µ–Ω—Ç–∞—Ä —Ç–∞ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –≥–µ—Ä–æ—è –±—É–¥—É—Ç—å –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏—Å—è —Ç—É—Ç.</p>
    </div>

    <div id="castleScreen" class="game-screen">
      <h2 class="screen-title">–í–∞—à –ó–∞–º–æ–∫</h2>
      <p>–ë—É–¥—É–π—Ç–µ —Ç–∞ –ø–æ–∫—Ä–∞—â—É–π—Ç–µ —Å–≤—ñ–π –∑–∞–º–æ–∫. –ó–º—ñ—Ü–Ω—é–π—Ç–µ –æ–±–æ—Ä–æ–Ω—É —Ç–∞ –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–æ!</p>
      <button class="screen-button" data-target-screen="heroScreen">–ù–∞–∑–∞–¥</button>
    </div>

    <div id="arenaScreen" class="game-screen">
      <h2 class="screen-title">–ê—Ä–µ–Ω–∞</h2>
      <p>–ë–æ—Ä—ñ—Ç—å—Å—è –∑ —ñ–Ω—à–∏–º–∏ –≥—Ä–∞–≤—Ü—è–º–∏ —Ç–∞ –∑–¥–æ–±—É–≤–∞–π—Ç–µ —Å–ª–∞–≤—É!</p>
      <button class="screen-button" data-target-screen="heroScreen">–ù–∞–∑–∞–¥</button>
    </div>

    <div id="messagesScreen" class="game-screen">
      <h2 class="screen-title">–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</h2>
      <p>–í–∞—à—ñ —ñ–≥—Ä–æ–≤—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è —Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è.</p>
      <button class="screen-button" data-target-screen="heroScreen">–ù–∞–∑–∞–¥</button>
    </div>

    <div id="ratingScreen" class="game-screen">
      <h2 class="screen-title">–†–µ–π—Ç–∏–Ω–≥</h2>
      <p>–ó–º–∞–≥–∞–π—Ç–µ—Å—è –∑–∞ –ø–µ—Ä—à—ñ –º—ñ—Å—Ü—è —É —Ç–∞–±–ª–∏—Ü—ñ –ª—ñ–¥–µ—Ä—ñ–≤.</p>
      <button class="screen-button" data-target-screen="heroScreen">–ù–∞–∑–∞–¥</button>
    </div>

    <div id="settingsScreen" class="game-screen">
      <h2 class="screen-title">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h2>
      <p>–£–≤—ñ–º–∫–Ω—ñ—Ç—å/–≤–∏–º–∫–Ω—ñ—Ç—å –∑–≤—É–∫, –≤–∏–±–µ—Ä—ñ—Ç—å –º–æ–≤—É —Ç–∞ —ñ–Ω—à–µ.</p>
      <button class="screen-button" data-target-screen="heroScreen">–ù–∞–∑–∞–¥</button>
    </div>

    <div class="bottom-action-panel">
      <button class="bottom-action-button active-nav" data-target-screen="heroScreen">
        <span class="emoji-icon">üë§</span><span>–ì–µ—Ä–æ–π</span>
      </button>
      <button class="bottom-action-button" data-target-screen="castleScreen">
        <span class="emoji-icon">üè∞</span><span>–ó–∞–º–æ–∫</span>
      </button>
      <button class="bottom-action-button" data-target-screen="arenaScreen">
        <span class="emoji-icon">‚öîÔ∏è</span><span>–ê—Ä–µ–Ω–∞</span>
      </button>
      <button class="bottom-action-button" data-target-screen="messagesScreen">
        <span class="emoji-icon">‚úâÔ∏è</span><span>–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</span>
      </button>
      <button class="bottom-action-button" data-target-screen="ratingScreen">
        <span class="emoji-icon">üèÜ</span><span>–†–µ–π—Ç–∏–Ω–≥</span>
      </button>
    </div>
  </div>

  <audio id="backgroundMusic" src="media/background.mp3" loop preload="auto"></audio>
  <audio id="clickSound" src="media/click.mp3" preload="auto"></audio>

  <script>
    const screens = document.querySelectorAll('.game-screen');
    const navButtons = document.querySelectorAll('.bottom-action-button');
    const screenButtons = document.querySelectorAll('.screen-button');
    const settingsButton = document.getElementById('settingsButton'); 
    const backgroundMusic = document.getElementById('backgroundMusic');
    const clickSound = document.getElementById('clickSound');

    function playClickSound() {
      if (clickSound) {
        clickSound.currentTime = 0;
        clickSound.play().catch(e => console.error("–ü–æ–º–∏–ª–∫–∞ –∑–≤—É–∫—É –∫–ª—ñ–∫—É:", e));
      }
    }

    function showScreen(screenId) {
      screens.forEach(screen => screen.classList.remove('active'));
      document.getElementById(screenId).classList.add('active');
      navButtons.forEach(btn => {
        btn.classList.toggle('active-nav', btn.dataset.targetScreen === screenId);
      });
      playClickSound();
    }

    navButtons.forEach(btn => btn.addEventListener('click', () => showScreen(btn.dataset.targetScreen)));
    screenButtons.forEach(btn => btn.addEventListener('click', () => showScreen(btn.dataset.targetScreen)));
    settingsButton.addEventListener('click', () => showScreen('settingsScreen'));

    document.addEventListener('DOMContentLoaded', () => {
      backgroundMusic.play().catch(() => {
        console.log("–ú—É–∑–∏–∫–∞ –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–∞ –±–µ–∑ –≤–∑–∞—î–º–æ–¥—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.");
      });

      // ‚úÖ Telegram WebApp —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è
      const tg = window.Telegram.WebApp;
      tg.expand();
      const user = tg.initDataUnsafe.user;

      const avatarImg = document.querySelector('.user-profile-info img');
      const usernameSpan = document.querySelector('.user-profile-info span');

      if (user) {
        usernameSpan.textContent = user.username || user.first_name || "–ì—Ä–∞–≤–µ—Ü—å";
        avatarImg.src = user.photo_url || "media/avatar.png";
      } else {
        usernameSpan.textContent = "–ì—ñ—Å—Ç—å";
        avatarImg.src = "media/avatar.png";
      }
    });

    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('ServiceWorker OK:', reg.scope))
          .catch(err => console.log('ServiceWorker error:', err));
      });
    }
  </script>

</body>
</html>
